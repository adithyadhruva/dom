<!DOCTYPE html>
<html>
  <head>
    <title>Select Cars</title>
    <style>
        .searchSelectS {
      position: relative;
    }
    
    .searchSelectS label {
      display: block;
      margin-bottom: 5px;
    }
    
    .searchSelectS input[type="text"] {
      width: 300px;
      padding: 12px 20px;
      margin: 8px 0;
      box-sizing: border-box;
      border: 2px solid #ccc;
      border-radius: 4px;
      font-size: 16px;
    }
    
    .searchSelectS #carDetails {
      position: absolute;
      left: 0px;
      z-index: 1;
      align-content: center;
      background-color: #f9f9f9;
      min-width: 300px;
      box-shadow: 0px 8px 16px 0px rgba(0, 0, 0, 0.2);
      border-radius: 5px;
      max-height: 150px;
      overflow-y: auto;
      display: none;
    }
    
    .searchSelectS #carDetails p {
      padding: 10px;
      margin: 0;
      cursor: pointer;
    }
    
    .searchSelectS #carDetails p:hover {
      background-color: #f1f1f1;
    }
    
      </style>

  </head>
  <body>
    <div class="searchSelectS">
      <label for="search">Cars:</label>
      <input type="text" id="search">
      <div id="Cars"></div>
    </div>
    <script>
      var carDetails = [
        { "id": "101", "nameofCars": "Eagle" },
        { "id": "102", "nameofCars": "Bugatti" },
        { "id": "103", "nameofCars": "Honda" },
        { "id": "104", "nameofCars": "Dartz" },
        { "id": "106", "nameofCars": "Audi" },
        { "id": "107", "nameofCars": "Ferrari" },
        { "id": "108", "nameofCars": "Ford" },
        { "id": "109", "nameofCars": "Chevrolet" },
        { "id": "110", "nameofCars": "Hyundai" },
        { "id": "111", "nameofCars": "Mahindra" },
        { "id": "112", "nameofCars": "Porsche" },
        { "id": "113", "nameofCars": "Skoda" },
        { "id": "114", "nameofCars": "Volkswagen" },
      ];

      function setDefaultValue(xvariablename, xid, xvalue, xdestination) {
        var output = '<label><input type="checkbox" onclick="selectAll(this)">Select All</label><br>';
        for (var i = 0; i < xvariablename.length; i++) {
          output += '<label><input type="checkbox" name="car" value="' + xvariablename[i][xid] + '" onclick="updateSearch()">' + xvariablename[i][xvalue] + '</label><br>';
        }
        document.getElementById(xdestination).innerHTML = output;
      }

      function selectAll(checkbox) {
        var checkboxes = document.getElementsByName("car");
        for (var i = 0; i < checkboxes.length; i++) {
          checkboxes[i].checked = checkbox.checked;
        }
        updateSearch();
      }

      function updateSearch() {
        var searchBox = document.getElementById("search");
        var searchTerms = [];
        var checkboxes = document.getElementsByName("car");
        for (var i = 0; i < checkboxes.length; i++) {
          if (checkboxes[i].checked) {
            searchTerms.push(checkboxes[i].nextSibling.textContent);
          }
        }
        searchBox.value = searchTerms.join(", ");
      }

      var searchBox = document.getElementById("search");
      var carsDiv = document.getElementById("Cars");

      searchBox.addEventListener("click", function () {
        carsDiv.style.display = "block";
      });

      document.addEventListener("click", function (event) {
        var target = event.target;
        if (target != searchBox && target.parentNode != carsDiv) {
          carsDiv.style.display = "none";
        }
      });

      setDefaultValue(carDetails,'id', 'nameofCars','Cars');
    </script>
  </body>
</html>
